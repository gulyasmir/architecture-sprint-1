# Задание 1

## 1 уровень. Проектирование.

Я выбираю фреймворк для создания микрофронтендов - Webpack Module Federation, т.к. он позволяет:

1. Гибкость и масштабируемость:
   - Module Federation позволяет разделять проект на независимые модули, которые могут быть разработаны и развернуты автономно.
   - Модули могут динамически подключаться во время выполнения, что обеспечивает гибкость при обновлении и расширении приложения.

2. Быстрая интеграция:
   - Если в проекте уже используется Webpack, интеграция Module Federation происходит быстро и практически безболезненно.
   - Это упрощает внедрение микрофронтендов в существующий проект.

3. Отсутствие жесткой зависимости от фреймворка:
   - Module Federation поддерживает использование различных технологий внутри микрофронтендов (например, React, Vue, Angular или Vanilla JS).
   - Это делает его универсальным решением для проектов с различными техническими стеком.

4. Меньшая сложность настройки:
   - В сравнении с Single SPA, Module Federation имеет более простую архитектуру и не требует сложной настройки роутинга и общих библиотек.

5. Возможность использовать разные версии библиотек без конфликтов, а также  Module Federation поддерживает возможность шаринга общих библиотек (например, React, ReactDOM или другие зависимости), что снижает размер финального бандла.

6. Дает независимоить разработки и развертывая микрофронтендов.

7. Оптимизация использования ресурсов за счёт ленивой загрузки модулей.

Module Federation может быть полезен в любой ситуации, когда необходимо совместно использовать код между несколькими независимыми фронтенд-приложениями, чтобы улучшить их масштабируемость, производительность и эффективность разработки.

По моему мнению, Single SPA сюда подходит меньше, по следующим причинам:

Single SPA хорошо подходит для проектов, где требуется жесткое разделение фронтендов по роутам, а также для проектов с несколькими командами, работающими над разными частями приложения. Однако в случае с проектом Mesto это даст:

1. Высокий порог вхождения и сложность настройки:
   - Single SPA требует создания отдельных слоев для маршрутизации и интеграции микрофронтендов, что может быть избыточным для относительно небольшого проекта.

2. Сложности с производительностью:
   - Из-за необходимости рендерить несколько фреймворков одновременно (например, React и Vue) Single SPA может увеличивать потребление ресурсов.

3. Избыточность:
   - Если проект Mesto не предполагает радикально разных стеков технологий, использование Single SPA выглядит излишним.



## 2 уровень.  Архитектура проекта с использованием Module Federation

Разделение на микрофронтенды:
1. Main (основной контейнер):
   - Управляет роутингом и интеграцией микрофронтендов.
   - Содержит общий layout (например, header и footer).

2. Gallery (галерея):
   - Отвечает за отображение карточек с изображениями.
   - Реализует функционал загрузки фотографий
   - Реализует функционал удаления фотографий
   - Реализует функционал сбора и учёт лайков под фото.

3. Profile (профиль пользователя):
   - Реализует функционал профиля (cоздание профиля, отображение и редактирование).

4. Auth (авторизация):
   - Реализует регистрацию и вход пользователя.
   - Может быть полностью автономным.

   Преимущества предложенного подхода

1. Минимальные изменения в существующем проекте.
2. Высокая производительность за счёт динамической загрузки модулей.
3. Лёгкость в обновлении и деплое отдельных частей приложения.
4. Простота в поддержке и расширении функционала.


# Задание 2.

Ссылка: 
https://drive.google.com/file/d/1leD2B30--NiCRuoZrDu_fhuIHhgzZ68d/view?usp=sharing

Описание взаимодействий  (то же, что и в схеме, для удобства чтения)

На схеме выше показана схема предполагаемого взаимодействия микросервисов Торговой площадки.  
Светло-красным цветом показаны микросервисы фронтенда, светло-зеленым - микросервисы бекенда.  


Первая группа микросервисов фронтенда - это приложение для пользователя. Оно реализует ряд функций взаимодействия с пользователем, в соответствии со своими названиями (регистрация, профиль, заказы, услуги, аукционы, заявки, товары, аппеляции).

Ниже указаны номера стрелок и описания к ним.  Стрелки двунаправленные, т.к. символизируют передачу данных в оба направления, хотя это конечно будут разные процессы (запись, чтение, редактировани и т.д.)

Итак:

1. Взаимодействие микросервиса фроненда Регистрации и Авторизации с API, сюда входит регистрация пользователя, аутентификация, роли и т.д.  Т.е. все, что касается идентификации пользователя системой.

2.  Взаимодействие микросервиса фронтенда Профиль - тут пользователь создает и редактирет свой профиль - ФИО, почту для связи, телефон и другие личные данные.

3. Взаимодействие микросервиса фронтенда Заказы - тут пользователь создает и редактирует заказ, так же просмотривает или ищет заказы.

4. Взаимодействие микросервиса фронтенда Техподдержка - пользователь создает заявку на техподдержку, может задать вопрос или сообщить о проблеме, а так же прочитать ответ от техподдержки.

5. Взаимодействие микросервиса фронтенда Аукционы - пользователь подает заявки на участие в акционах, просматривает акционы, в которых он участвует, поиск и просмотр результатов.

6. Взаимодействие микросервиса фронтенда Услуги - аналогично заказам и заявкам, пользователь создает, редактирует, просматривает и ищет свои услуги, так же имеет возможность искать, просматривать услуги других пользователей.

7. Взаимодействие микросервиса фронтенда Товары - аналогично заказам, заявкам и услугам.

8. Взаимодействие микросервиса фронтенда Аппелляции - создание и просмотр апелляций. 

Все эти микросервисы передают данные от фроненда к API.

Но так же имеется еще два микросервиса фронтенда.  Это микросервис для работы администратора системы ( тут показан в минимальной "комплектации", реально скорее всего его функционал будет гораздо шире).  И микросервис фронетнда для техподдержки.

Рассмотрим их подробнее:

 9. Микросервис фронтенда администратора системы позволяет ему создавать и редактировать аукционы, а так же валидировать заявки на аукционы. Данные отсюда так же передаются в общее API.

 10. Микросервис техподдержки позволяет создать заявку на техподдержку (если заявка например получена по телефону), просматривать, редактировать ее и обновлять статус заявки.  Данные отсюда так же передаются в общее API.

Выше были описаны двусторонние потоки данных от микрофронтендов к общему API.  Далее данные передаются в Оркестратор, который координирует работу микросервисов бекенда. (стрелка 11).

Последующшие потоки данных описывают взаимодействие между оркестратором и микросервисами бекенда.

12. Регистрация и авторизация пользователя на площадке

13. Создание и редактирование профиля пользователя

14. Взаимодействие по услугам - создание, редактирование, посик и просмотр услуг.

15. Взаимодействие по заказам - аналогично для заказов.

16. Взаимодействие по товарам - аналогично для товаров.
 
17. Взаимодействие по аппеляциям.

18. Взаимодействие по платежам с микросервисом платежей. Передача команд, что следует сделать микеросервису по работе с платежными системами, а так получение данных о совершенных, отмененных операцих и прочем, что происходит в этом микросервисе

19. Взаимодействие по аукционам

20. Взаимодействие по техподдержке - получение и передача данных, кааасающихся техподдержки.

21. Взаимодействие микросервиса платежей с внешней платежной системой (инициировать платеж, предоставить статус платежа и т.д.)


Все стрелки обозначены красным, т.к. эти связи новые.  Также некоторые сущности обведены красным в соответствии с заданием, как новые (это аппеляции, платежные операции, аукционы и техподдержка).

Каждая стрелка подразумевает передачу и получение данных, транзакции, операции для реализации задачи, и компенсирующие операции, если реализовать задачу не удалось (ошибка, сбой и т.д.) для обеспечения целостности и согласованности данных (аналог rollback в транзакции, если бы это была одна БД как в монолите).